<!DOCTYPE html>
<html lang="es">
<head>
  <title>ArcGIS Configurable Apps</title>
  <meta charset="utf-8">

  <!-- Always force latest IE rendering engine or request Chrome Frame -->
  <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
  <meta name="viewport" content="width=device-width, user-scalable=no">

  <!--[if lt IE 9]>
  <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js">
  </script>
  <![endif]-->

  <!--[if IE]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/selectivizr/1.0.2/selectivizr-min.js"></script>
  <![endif]-->

  <link rel="stylesheet" href="https://s3-us-west-1.amazonaws.com/patterns.esri.com/files/calcite-web/1.0.0-rc.4/css/calcite-web.min.css">
  <script src="https://s3-us-west-1.amazonaws.com/patterns.esri.com/files/calcite-web/1.0.0-rc.4/js/calcite-web.min.js"></script>

  <script>
    window.onload = function () {calcite.init();};
  </script>
</head>

<body>

  <div class="grid-container">
    <div class="column-24">
      <!-- desktop sized navigation -->
      <div class="tablet-hide">
        <!-- logo / home -->
        <a href="#" class="top-nav-title">
          ArcGIS Configurable Web Apps <br>
          <small style="font-style: italic;">Extend your organization with new templates, storymaps and much more.</small>
        </a>

        <!-- primary navigation sections -->
        <nav class="top-nav-list" role="navigation" aria-labelledby="topnav">
          <!--<a class="top-nav-link" href="#">About us</a>
          <a class="top-nav-link" href="#"> | </a>
          <a class="top-nav-link" href="#">Developers</a>-->
        </nav>
        <!-- user specific dropdowns -->
        <nav class="class-top-nav-list right" role="navigation" aria-labelledby="usernav">
          <!--
          <form method="GET" action="/search/" class="inline-block padding-leader-half">
            <input type="search" placeholder="Search" name="q" style="margin-top: -1px;">
            <button type="submit" class="hide">Search</button>
          </form>
          -->
          <a class="top-nav-link icon-ui-user margin-left-1" href="https://arcgis.domake.io/login/arcgis/" id="login">Sign In</a>
          <a class="top-nav-link icon-ui-user margin-left-1" href="https://arcgis.domake.io/logout" id="logout" style="display:none">Logout</a>
        </nav>

      </div>

      <!-- tablet and mobile sized navigation -->
      <div class="tablet-show top-nav-flex">
        <!-- open primary navigation drawer -->
        <nav class="top-nav-flex-list" role="navigation" aria-labelledby="topnav">
          <a href="/" class="icon-ui-menu top-nav-link js-drawer-toggle" data-drawer="top-nav"><span class="phone-hide">Menu</span></a>
        </nav>
        <!-- logo / home -->
        <header class="top-nav-flex-title">
          <a href="/" class="top-nav-link">ArcGIS <span class="phone-hide">for Developers</span></a>
        </header>
        <!-- user specific actions -->
        <nav class="top-nav-flex-list text-right" role="navigation" aria-labelledby="usernav">
          <a class="top-nav-link icon-ui-search js-drawer-toggle" href="#" aria-label="Search"><span class="phone-hide">Search</span></a>
          <a class="top-nav-link icon-ui-user margin-left-1 js-drawer-toggle" href="#" aria-label="Sign In"><span class="phone-hide">Sign In</span></a>
        </nav>
      </div>
    </div>

    <div class="column-24" id="details">
      <div class="column-18">
        <p>
          <a href="../">Home</a> / <!--<a href="#">Developers</a> / <a href="#" id="author"></a> /--> <span id="template-name"></span>
        </p>
        <h1 id="title"></h1>
        <style>
          h1{
            font-size: 1.5rem;
            margin: 0;
          }
          h2{
            font-size: 1.2rem;
          }
          #preview-canvas{
            max-height: 400px;
            width: 100%;
            overflow: hidden;
          }
        </style>
        <div id="preview-canvas">
          <img src="" id="preview">
        </div>
        <h2 class="leader-0 trailer-0 tablet-show">
          Description
        </h2>
        <h2 class="leader-1 trailer-0 tablet-hide">
          Description
        </h2>
        <p id="description"></p>



      </div>
      <div class="column-6">
        <span class="leader-2 tablet-hide">&nbsp;</span>
        <p>
          <button class="btn btn-fill btn-clear leader-half icon-ui-maps">Preview</button>
          <button class="btn btn-fill btn-green leader-half icon-ui-favorites">Like</button>
          <a href="#" class="btn btn-fill leader-half icon-ui-plus" id="buy">Buy now (<span id="price"></span>)</a>
        </p>
        <p>
          <strong>Last update</strong>: <span id="last-update"></span><br>
        </p>
        <p>
          <strong>Active installs</strong>: <span id="active-installs">12.302</span>
        </p>

      </div>
    </div>
      <div class="column-24">
        <div id="disqus_thread"></div>
<script>

/**
*  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
*  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
/*
var disqus_config = function () {
this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://arcgis-confapps.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
      </div>

    </div>

  </div>

  <footer class="footer leader-2 link-dark-gray" role="contentinfo">
      <div class="grid-container">
          <nav class="column-6">
            <h6>Organizations</h6>
            <ul class="list-plain">
              <li><a href="#">Support</a></li>
              <li><a href="#">Share and idea</a></li>
              <li><a href="#">Co-create an app</a></li>
            </ul>
          </nav>

          <nav class="column-6">
            <h6>Developers</h6>
            <ul class="list-plain">
              <li><a href="#">Publish your app</a></li>
              <li><a href="https://esri-es.github.io/awesome-arcgis/arcgis/products/configurable-apps/">Guides</a></li>
              <li><a href="https://geonet.esri.com/groups/arcgis-online-templates">Community</a></li>
            </ul>
          </nav>

          <nav class="column-6">
            <h6>About Vexiza</h6>
            <ul class="list-plain">
              <li><a href="#">About Us</a></li>
              <li><a href="#">Careers</a></li>
              <li><a href="#">Insiders Blog</a></li>
            </ul>
          </nav>

          <nav class="column-6">
            <a class="esri-logo" href="http://vexiza.com/" aria-label="Vexiza Home"
            style="
                  background-image: url(http://vexiza.com/wp-content/uploads/2016/01/logoweb-negro-normal.png)!important;
                  width: 137px;
                  "
            ></a>
            <section class="footer-social-nav leader-1">
              <a class="icon-social-twitter" aria-label="Vexiza on Twitter" href="https://twitter.com/vexiza_leon"></a>
              <a class="icon-social-linkedin" aria-label="Vexiza on Linkedin" href="https://www.linkedin.com/company/vexiza"></a>
              <a class="icon-social-youtube" aria-label="Vexiza on Instagram" href="https://www.youtube.com/channel/UCaflKFwmIoRchEcawMAwIXQ"></a>
              <a class="icon-social-google-plus" aria-label="Vexiza on Google+" href="https://plus.google.com/106531276152718092500/about"></a>
              <a class="icon-social-contact" aria-label="Contact Vexiza" href="http://vexiza.com/?page_id=6337"></a>
            </section>
          </nav>

          <div class="column-24 leader-1">
            <p><small>Copyright Â© 2017 Vexiza. All rights reserved. </small></p>
          </div>
        </div>


    </footer>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script src="../js/js.cookie.js"></script>
  <script src="../js/index.js"></script>
  <script>

    $.ajaxSetup({
      crossDomain: true,
      xhrFields: {
        withCredentials: true
      }
    });

    var request = function(url, method, data, success) {
      $.ajax(url, {
        method: method,
        data: data,
        dataType: 'json',
        success: function(data){
          render_to_response(url, data)
        },
        error: function(data) {
          render_to_response(url, data);
        }
      });
    }

    var render_to_response = function(url, data){
      //debugger
      $("#author").text(data.owner.username);
      $("#title").text(data.title);
      if(data.price>0){
        $("#price").text("$"+(data.price/100));
        $("#buy").attr("href", "buy/?id="+data.id)
      }else{
        $("#buy").text("Install for free");
      }
      $("#template-name").text(data.title);
      $("#preview").attr("src",data.image);
      $("#description").text(data.description);
      $("#last-update").text(data.created);
// data.results.forEach(function(elem, i){
// debugger
//         elem.description = elem.description? elem.description: "Without description";
//         var price = (elem.price/100 > 0)? "$"+ (elem.price/100): "Free";
//         var p = '' +
//         '<div class="card block trailer-1">'+
//           '<a href="#"><img class="card-image" src="'+elem.image+'"></a>'+
//           '<div class="card-content">'+
//             '<h4 class="font-size-1 trailer-half"><a href="#">'+elem.title+'</a></h4>'+
//             '<p class="trailer-0 font-size--1">'+elem.description+' <br> Author: '+elem.owner.username+' | Price: '+ price +'</p>'+
//           '</div>'+
//         '</div>';
//
//         $("#products").append(p);
//       });
    }

    function getUrlVars()
    {
        var vars = [], hash;
        var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
        for(var i = 0; i < hashes.length; i++)
        {
            hash = hashes[i].split('=');
            vars.push(hash[0]);
            vars[hash[0]] = hash[1];
        }
        return vars;
    }
    var qs = getUrlVars();
    var get_details = "https://arcgis.domake.io/api/products/" + qs.id;
    request(get_details, 'GET');
  </script>
</body>
</html>
