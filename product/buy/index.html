<!DOCTYPE html>
<html lang="es">
<head>
  <title>ArcGIS Configurable Apps</title>
  <meta charset="utf-8">

  <!-- Always force latest IE rendering engine or request Chrome Frame -->
  <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
  <meta name="viewport" content="width=device-width, user-scalable=no">

  <!--[if lt IE 9]>
  <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js">
  </script>
  <![endif]-->

  <!--[if IE]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/selectivizr/1.0.2/selectivizr-min.js"></script>
  <![endif]-->

  <link rel="stylesheet" href="https://s3-us-west-1.amazonaws.com/patterns.esri.com/files/calcite-web/1.0.0-rc.4/css/calcite-web.min.css">
  <script src="https://s3-us-west-1.amazonaws.com/patterns.esri.com/files/calcite-web/1.0.0-rc.4/js/calcite-web.min.js"></script>

  <script>
    window.onload = function () {calcite.init();};
  </script>
</head>

<body>

  <div class="grid-container">
    <div class="column-24">
      <!-- desktop sized navigation -->
      <div class="tablet-hide">
        <!-- logo / home -->
        <a href="#" class="top-nav-title">
          ArcGIS Configurable Web Apps <br>
          <small style="font-style: italic;">Extend your organization with new templates, storymaps and much more.</small>
        </a>

        <!-- primary navigation sections -->
        <nav class="top-nav-list" role="navigation" aria-labelledby="topnav">
          <!--<a class="top-nav-link" href="#">About us</a>
          <a class="top-nav-link" href="#"> | </a>
          <a class="top-nav-link" href="#">Developers</a>-->
        </nav>
        <!-- user specific dropdowns -->
        <nav class="class-top-nav-list right" role="navigation" aria-labelledby="usernav">
          <!--
          <form method="GET" action="/search/" class="inline-block padding-leader-half">
            <input type="search" placeholder="Search" name="q" style="margin-top: -1px;">
            <button type="submit" class="hide">Search</button>
          </form>
          -->
          <a class="top-nav-link icon-ui-user margin-left-1" href="https://arcgis.domake.io/login/arcgis/">Sign In</a>
        </nav>

      </div>

      <!-- tablet and mobile sized navigation -->
      <div class="tablet-show top-nav-flex">
        <!-- open primary navigation drawer -->
        <nav class="top-nav-flex-list" role="navigation" aria-labelledby="topnav">
          <a href="/" class="icon-ui-menu top-nav-link js-drawer-toggle" data-drawer="top-nav"><span class="phone-hide">Menu</span></a>
        </nav>
        <!-- logo / home -->
        <header class="top-nav-flex-title">
          <a href="/" class="top-nav-link">ArcGIS <span class="phone-hide">for Developers</span></a>
        </header>
        <!-- user specific actions -->
        <nav class="top-nav-flex-list text-right" role="navigation" aria-labelledby="usernav">
          <a class="top-nav-link icon-ui-search js-drawer-toggle" href="#" aria-label="Search"><span class="phone-hide">Search</span></a>
          <a class="top-nav-link icon-ui-user margin-left-1 js-drawer-toggle" href="#" aria-label="Sign In"><span class="phone-hide">Sign In</span></a>
        </nav>
      </div>
    </div>

    <div class="column-24">


      <div class="column-10 pre-4">
        <h1>Price</h1>
        <p>
          Amount: 1 x <span class="price"></span> = <strong class="price"></strong>
        </p>
        <h1>Payment methods</h1>
        <p>
         <label>
           <input type="radio" name="color" value="paypal" checked> Pay using Paypal
         </label>
       </p>
        <div id="paypal"></div>

        <p class="leader-1">
          <label>
            <input type="radio" name="color" value="paypal"> Pay using bank transfer
          </label>
        </p>
      </div>
      <div class="column-6">
        <h1 id="title"></h1>
        <style>
          h1{
            font-size: 1.5rem;
            margin: 0;
          }
          h2{
            font-size: 1.2rem;
          }
          #paypal input[type="image"]{
            width: 230px;
            margin: 0 auto;
            height: auto;

          }
        </style>
        <div id="preview-canvas" class="trailer-half">
          <img src="" id="preview">
        </div>
        <p>
          Author: <span id="author"></span>
        </p>

      </div>

    </div>

  </div>

  <footer class="footer leader-2 link-dark-gray" role="contentinfo">
      <div class="grid-container">
          <nav class="column-6">
            <h6>Organizations</h6>
            <ul class="list-plain">
              <li><a href="#">Support</a></li>
              <li><a href="#">Share and idea</a></li>
              <li><a href="#">Co-create an app</a></li>
            </ul>
          </nav>

          <nav class="column-6">
            <h6>Developers</h6>
            <ul class="list-plain">
              <li><a href="#">Publish your app</a></li>
              <li><a href="https://esri-es.github.io/awesome-arcgis/arcgis/products/configurable-apps/">Guides</a></li>
              <li><a href="https://geonet.esri.com/groups/arcgis-online-templates">Community</a></li>
            </ul>
          </nav>

          <nav class="column-6">
            <h6>About Vexiza</h6>
            <ul class="list-plain">
              <li><a href="#">About Us</a></li>
              <li><a href="#">Careers</a></li>
              <li><a href="#">Insiders Blog</a></li>
            </ul>
          </nav>

          <nav class="column-6">
            <a class="esri-logo" href="http://vexiza.com/" aria-label="Vexiza Home"
            style="
                  background-image: url(http://vexiza.com/wp-content/uploads/2016/01/logoweb-negro-normal.png)!important;
                  width: 137px;
                  "
            ></a>
            <section class="footer-social-nav leader-1">
              <a class="icon-social-twitter" aria-label="Vexiza on Twitter" href="https://twitter.com/vexiza_leon"></a>
              <a class="icon-social-linkedin" aria-label="Vexiza on Linkedin" href="https://www.linkedin.com/company/vexiza"></a>
              <a class="icon-social-youtube" aria-label="Vexiza on Instagram" href="https://www.youtube.com/channel/UCaflKFwmIoRchEcawMAwIXQ"></a>
              <a class="icon-social-google-plus" aria-label="Vexiza on Google+" href="https://plus.google.com/106531276152718092500/about"></a>
              <a class="icon-social-contact" aria-label="Contact Vexiza" href="http://vexiza.com/?page_id=6337"></a>
            </section>
          </nav>

          <div class="column-24 leader-1">
            <p><small>Copyright Â© 2017 Vexiza. All rights reserved. </small></p>
          </div>
        </div>


    </footer>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script>

    var qs = getUrlVars();
    var paypal_endpoint = "https://arcgis.domake.io/items/" + qs.id + "/paypal-form";

    $.get(paypal_endpoint, function( data ) {
       $("#paypal").html( data );
    });

    $.ajaxSetup({
      crossDomain: true,
      xhrFields: {
        withCredentials: true
      }
    });

    var request = function(url, method, data, success) {
      $.ajax(url, {
        method: method,
        data: data,
        dataType: 'json',
        success: function(data){
          render_to_response(url, data)
        },
        error: function(data) {
          render_to_response(url, data);
        }
      });
    }

    var render_to_response = function(url, data){
      $("#author").text(data.owner.username);
      $("#title").text(data.title);
      if(data.price>0){
        $(".price").text("$"+(data.price/100));
      }else{
        $("#buy").text("Install for free");
      }

      $("#preview").attr("src",data.image);

    }
    var get_details = "https://arcgis.domake.io/api/products/" + qs.id;
    request(get_details, 'GET');

    function getUrlVars()
    {
        var vars = [], hash;
        var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
        for(var i = 0; i < hashes.length; i++)
        {
            hash = hashes[i].split('=');
            vars.push(hash[0]);
            vars[hash[0]] = hash[1];
        }
        return vars;
    }


  </script>
</body>
</html>
