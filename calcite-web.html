<!DOCTYPE html>
<html lang="es">
<head>
  <title>ArcGIS Configurable Apps</title>
  <meta charset="utf-8">

  <!-- Always force latest IE rendering engine or request Chrome Frame -->
  <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
  <meta name="viewport" content="width=device-width, user-scalable=no">

  <!--[if lt IE 9]>
  <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js">
  </script>
  <![endif]-->

  <!--[if IE]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/selectivizr/1.0.2/selectivizr-min.js"></script>
  <![endif]-->

  <link rel="stylesheet" href="https://s3-us-west-1.amazonaws.com/patterns.esri.com/files/calcite-web/1.0.0-rc.4/css/calcite-web.min.css">
  <script src="https://s3-us-west-1.amazonaws.com/patterns.esri.com/files/calcite-web/1.0.0-rc.4/js/calcite-web.min.js"></script>

  <script>
    window.onload = function () {calcite.init();};
  </script>
</head>

<body>

  <div class="grid-container">
    <div class="column-24">
      <!-- desktop sized navigation -->
      <div class="tablet-hide">
        <!-- logo / home -->
        <a href="#" class="top-nav-title">ArcGIS Configurable Apps</a>
        <!-- primary navigation sections -->
        <nav class="top-nav-list" role="navigation" aria-labelledby="topnav">
          <a class="top-nav-link" href="#">About us</a>
          <a class="top-nav-link" href="#"> | </a>
          <a class="top-nav-link" href="#">Developers</a>
        </nav>
        <!-- user specific dropdowns -->
        <nav class="class-top-nav-list right" role="navigation" aria-labelledby="usernav">
          <form method="GET" action="/search/" class="inline-block padding-leader-half">
            <input type="search" placeholder="Search" name="q" style="margin-top: -1px;">
            <button type="submit" class="hide">Search</button>
          </form>
          <a class="top-nav-link icon-ui-user margin-left-1" href="https://arcgis.domake.io/login/arcgis/">Sign In</a>
        </nav>
      </div>

      <!-- tablet and mobile sized navigation -->
      <div class="tablet-show top-nav-flex">
        <!-- open primary navigation drawer -->
        <nav class="top-nav-flex-list" role="navigation" aria-labelledby="topnav">
          <a href="/" class="icon-ui-menu top-nav-link js-drawer-toggle" data-drawer="top-nav"><span class="phone-hide">Menu</span></a>
        </nav>
        <!-- logo / home -->
        <header class="top-nav-flex-title">
          <a href="/" class="top-nav-link">ArcGIS <span class="phone-hide">for Developers</span></a>
        </header>
        <!-- user specific actions -->
        <nav class="top-nav-flex-list text-right" role="navigation" aria-labelledby="usernav">
          <a class="top-nav-link icon-ui-search js-drawer-toggle" href="#" aria-label="Search"><span class="phone-hide">Search</span></a>
          <a class="top-nav-link icon-ui-user margin-left-1 js-drawer-toggle" href="#" aria-label="Sign In"><span class="phone-hide">Sign In</span></a>
        </nav>
      </div>
    </div>

    <div class="column-24">
      <div class="block-group block-group-4-up tablet-block-group-2-up phone-block-group-1-up leader-1" id="products">

      </div>
    </div>

  </div>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script>

    $.ajaxSetup({
      crossDomain: true,
      xhrFields: {
        withCredentials: true
      }
    });

    var request = function(url, method, data, success) {
      $.ajax(url, {
        method: method,
        data: data,
        dataType: 'json',
        success: function(data){
          render_to_response(url, data)
        },
        error: function(data) {
          render_to_response(url, data);
        }
      });
    }

    var render_to_response = function(url, data){
  //    debugger
      data.results.forEach(function(elem, i){
//debugger
        elem.description = elem.description? elem.description: "Without description";
        var p = '' +
        '<div class="card block trailer-1">'+
          '<a href="#"><img class="card-image" src="https://github.com/Geo-Developers/youtube-video-tour/raw/master/images/screenshot_desktop.png"></a>'+
          '<div class="card-content">'+
            '<h4 class="font-size-1 trailer-half"><a href="#">'+elem.title+'</a></h4>'+
            '<p class="trailer-0 font-size--1">'+elem.description+' <br> Author: '+elem.owner.username+' | Price: $'+elem.price+'</p>'+
          '</div>'+
        '</div>';

        $("#products").append(p);
      });
    }

    var get_products = "https://arcgis.domake.io/api/products";
    request(get_products, 'GET');

  </script>
</body>
</html>
